//暂时定义输出语句是printf("%s=%d%c",vars[i].c_str(),variables[vars[i]]," \n"[i == vars.size() - 1]);暂时禁止print()不带参。

/*
目前已实现：
1-声明变量(及声明并赋值)、(几乎)表达式全家桶(包括赋值的右结合特性、逗号运算符)、while循环、for循环、if语句、break和continue、函数支持参数（仅int）和return(一个表达式或return;)。
2-支持空语句";"和空body，且支持这种写法：if(a<5)while(b<5)while(c<10){a+=1,b+=1;c+=2;}(即把下一个控制结构语句视为自身的";")
3-已支持数组。终于图灵完备了QAQ。
4-匿名作用域。
*/

/*
为了简化实现(我太菜了)，做如下约定：
1-入口只能为main，main无参。
2-声明变量和赋值可以同时完成了。
3-内置函数print不能出现在逗号表达式里，即必须单独成语句。如：if(...) print();是合法的。
4-循环语句的条件部分可以置空，默认值为true，但if语句的条件部分不允许为空。
5-由于作者太菜了，暂时没有写处理函数、数组、变量重名的代码。因此任何类型变量都不要重名，可能出现未定义行为...
6-全局变量赋值时调用函数可能出现未定义行为...
7-不支持短路特性：由于 bool 型被 int型取代了，因此所有的表达式都应该被完全计算：例如在表达式(a && (b = c))中，即使 a 已经被确定是 0，仍然需要计算(b = c)的值。
8-数组不支持声明并赋值。
9-cin、cout没有返回值，可以放在表达式里但暂不支持逗号分开。变量名不得为cin、cout、endl等。因为有二义性问题，没有实现"<<"运算符(我好菜啊555)。
*/

//已修复bug：
1-while循环内单句statement也应该开作用域。
2-支持空语句";"和空body，且支持这种写法：if(a<5)while(b<5)while(c<10){a+=1,b+=1;c+=2;}
3-forloop作用域需求：保留在init部分声明的变量,其余删除。我们改用一个Manager对象包办所有的作用域管理了。
4-stmts类需要初始化值，因为控制结构语句依赖它的返回值，若其数据仍然混乱，可能造成意外的return行为。
5-因为for、while的实现里，唯一出口忽略了stmts.cmd，无限循环里没有正常return。现已修复。
6-for、while循环在退出前多进行了1次条件检测，这是不应该的。最终方案是statements()执行后马上判定stmts.cmd。
7-实现时unit10为了判定“只有括号”，使用了parse_square_brackets()，导致数组下标被重复计算2次。采用“缓存方法”idxs_cache修复。
8-由于statements()未初始化Ret对象，会错误地返回“不合语法”。已修复。

//未修复bug：
1-正确的输入代码莫名出现自定义报错“Expected variable but get token: f1”。运行代码一定次数后才会出现这个bug。
目前猜测这个bug出现的原因是Trie树设置的ALPHA的大小30不够。现在已改成一个大于256的数。
/*
以上猜测的分析过程如下：
1-Trie树是在词法分析的贪心算法的基础上，用于判定“该词法单元是否是某个关键字”的数据结构。原先判定复杂度为O(Llogn)，用Trie后复杂度为O(L)，L为关键字最大长度，n为关键字个数。起到的是加速作用。
2-我们需要它来告诉我们一个词法单元是否是变量名。
3-ALPHA表示对这棵Trie可能出现的最大节点数的预估。如果只看symbol_dict和kwd_dict的insert方法，ALPHA取30是足够的。但是Trie树的另外两个方法也调用了ID方法，使得访问下标大于ALPHA成为可能，如此Trie的行为变得不可预测。
由于目前代码只允许出现ascii字符集，我们可以暂时把Trie的ALPHA设置为一个比256大的数。
*/
2-如前面所说，以后版本再加上禁止函数、数组、变量重名的代码(咕咕咕~)。